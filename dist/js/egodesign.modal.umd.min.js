!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):((e="undefined"!=typeof globalThis?globalThis:e||self).egodesign=e.egodesign||{},e.egodesign.modal=t())}(this,(function(){"use strict";const e=({element:e,enter:t,time:o,displayType:s,callback:n})=>{e.style.opacity=t?0:1,t&&(e.style.display=s||"block");let i=+new Date;!function s(){e.style.opacity=t?+e.style.opacity+(new Date-i)/(o||200):+e.style.opacity-(new Date-i)/(o||200),i=+new Date,t&&+e.style.opacity<1||!t&&+e.style.opacity>0?window.requestAnimationFrame&&requestAnimationFrame(s)||setTimeout(s,16):(t||(e.style.display="none"),n&&"function"==typeof n&&n())}()};return class{constructor({element:e,animation:t,lockScrollOnOpen:o,onOpen:s,onClose:n}){this.modal=e,this.lockScrollOnOpen=o||!0,this.box=e.querySelector(".modal__box"),this.content=e.querySelector(".modal__box__content"),this.closeBtn=e.querySelector(".modal__box__close-btn"),this.onOpen=s,this.onClose=n,this.state=!1,this.animation=t||"",this.runChecks().then((()=>{this.declareHandlers()}))}setAnimationType(){switch(this.animation){case"rise":this.box.style.top="15px",this.box.style.transition="top .2s ease-in-out";break;case"sink":this.box.style.bottom="15px",this.box.style.transition="bottom .2s ease-in-out";break;case"grow":this.box.style.transform="scale(.95)",this.box.style.transition="transform .2s ease-in-out";break;case"shrink":this.box.style.transform="scale(1.05)",this.box.style.transition="transform .2s ease-in-out"}}animate(e){switch(this.animation){case"rise":this.box.style.top=e?"0":"15px";break;case"sink":this.box.style.bottom=e?"0":"15px";break;case"grow":this.box.style.transform=e?"scale(1)":"scale(.95)";break;case"shrink":this.box.style.transform=e?"scale(1)":"scale(1.05)"}}open(t){this.lockScroll(),e({element:this.modal,enter:!0,duration:250,displayType:"block",callback:t}),setTimeout((()=>{this.animate(!0),this.modal.classList.add("--open")}),20),this.state=!0,"function"==typeof this.onOpen&&this.onOpen()}close(t){e({element:this.modal,enter:!1,duration:250,displayType:"block",callback:t}),this.animate(!1),this.modal.classList.remove("--open"),this.lockScroll(!1),this.state=!1,"function"==typeof this.onClose&&this.onClose()}lockScroll(e=!0){if(!this.lockScrollOnOpen)return!1;let t=document.getElementsByTagName("body")[0];e?t.style.overflow="hidden":t.style.removeProperty("overflow")}inyectContent(e,t){this.content.innerHTML=e,"function"==typeof t&&t()}runChecks(){const e=this;return new Promise(((t,o)=>{if(!e.modal)throw new Error("There's no modal element.");if(!e.box)throw new Error("There's no modal box element.");t()}))}declareHandlers(){const e=this;e.modal.addEventListener("click",(()=>e.close())),e.box.addEventListener("click",(e=>e.stopImmediatePropagation())),e.closeBtn&&e.closeBtn.addEventListener("click",(()=>e.close())),e.modal.querySelectorAll(".modal__close").forEach((t=>{t.addEventListener("click",(t=>{e.close()}))})),this.setAnimationType(this.animation)}}}));
